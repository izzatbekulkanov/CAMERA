{% load static i18n %}

<div class="navbar-custom">
    <div class="topbar">
        <div class="topbar-menu d-flex align-items-center gap-1">

            <!-- Logo -->
            <div class="logo-box">
                <a href="{% url 'dashboard' %}" class="logo-light">
                    <img src="{% static 'assets/images/logo-light.png' %}" class="logo-lg" alt="logo">
                    <img src="{% static 'assets/images/logo-sm.png' %}" class="logo-sm" alt="logo">
                </a>
                <a href="{% url 'dashboard' %}" class="logo-dark">
                    <img src="{% static 'assets/images/logo-dark.png' %}" class="logo-lg" alt="logo">
                    <img src="{% static 'assets/images/logo-sm.png' %}" class="logo-sm" alt="logo">
                </a>
            </div>

        </div>

        <ul class="topbar-menu d-flex align-items-center">

            <!-- Search -->
            <li class="app-search dropdown me-3 d-none d-lg-block">
                <form>
                    <input type="search" id="top-search" class="form-control rounded-pill"
                           placeholder="{% trans 'Qidirish...' %}">
                    <span class="fe-search search-icon font-16" title="{% trans 'Qidirish' %}"></span>
                </form>
            </li>

            <!-- Fullscreen -->
            <li class="d-none d-md-inline-block">
                <a class="nav-link waves-effect" data-toggle="fullscreen" href="#" title="{% trans 'To‚Äòliq ekran' %}">
                    <i class="fe-maximize font-22"></i>
                </a>
            </li>

            <!-- üåê Til tanlash Dropdown -->
            <li class="dropdown d-none d-md-inline-block">

                <a class="nav-link dropdown-toggle waves-effect waves-light arrow-none"
                   data-bs-toggle="dropdown" href="#">
                    {% get_current_language as LANGUAGE_CODE %}
                    {% if LANGUAGE_CODE == 'uz' %}
                        <img src="{% static 'assets/images/flags/uz.svg' %}" height="20">
                    {% elif LANGUAGE_CODE == 'ru' %}
                        <img src="{% static 'assets/images/flags/ru.svg' %}" height="20">
                    {% else %}
                        <img src="{% static 'assets/images/flags/us.svg' %}" height="20">
                    {% endif %}
                </a>

                <div class="dropdown-menu dropdown-menu-end dropdown-menu-animated">

                    <!-- Uzbek -->
                    <form method="post" action="{% url 'set_language' %}" class="dropdown-item p-0">
                        {% csrf_token %}
                        <input type="hidden" name="language" value="uz">
                        <button type="submit" class="dropdown-item d-flex align-items-center">
                            <img src="{% static 'assets/images/flags/uz.svg' %}" height="14" class="me-2">
                            O‚Äòzbekcha
                        </button>
                    </form>

                    <!-- Russian -->
                    <form method="post" action="{% url 'set_language' %}" class="dropdown-item p-0">
                        {% csrf_token %}
                        <input type="hidden" name="language" value="ru">
                        <button type="submit" class="dropdown-item d-flex align-items-center">
                            <img src="{% static 'assets/images/flags/ru.svg' %}" height="14" class="me-2">
                            –†—É—Å—Å–∫–∏–π
                        </button>
                    </form>

                    <!-- English -->
                    <form method="post" action="{% url 'set_language' %}" class="dropdown-item p-0">
                        {% csrf_token %}
                        <input type="hidden" name="language" value="en">
                        <button type="submit" class="dropdown-item d-flex align-items-center">
                            <img src="{% static 'assets/images/flags/us.svg' %}" height="14" class="me-2">
                            English
                        </button>
                    </form>

                </div>
            </li>

            <!-- User Menu -->
            <li class="dropdown">
                <a class="nav-link dropdown-toggle nav-user me-0 waves-effect"
                   data-bs-toggle="dropdown" href="#">
                    <img src="{% if request.user.image %}{{ request.user.image.url }}{% else %}{% static 'assets/images/users/user.webp' %}{% endif %}"
                         class="rounded-circle" alt="{% trans 'Foydalanuvchi' %}">
                    <span class="ms-1 d-none d-md-inline-block">
                        {{ request.user.first_name|default:request.user.username }}
                        <i class="mdi mdi-chevron-down"></i>
                    </span>
                </a>

                <div class="dropdown-menu dropdown-menu-end profile-dropdown">
                    <div class="dropdown-header noti-title">
                        <h6 class="text-overflow m-0">{% trans 'Xush kelibsiz!' %}</h6>
                    </div>

                    <a href="{% url 'my_profile' %}" class="dropdown-item notify-item">
                        <i class="fe-user"></i> {% trans 'Profilim' %}
                    </a>

                    <a href="#" class="dropdown-item notify-item">
                        <i class="fe-settings"></i> {% trans 'Sozlamalar' %}
                    </a>

                    <div class="dropdown-divider"></div>

                    <a href="{% url 'logout' %}" class="dropdown-item notify-item">
                        <i class="fe-log-out"></i> {% trans 'Tizimdan chiqish' %}
                    </a>
                </div>
            </li>


        </ul>
    </div>
</div>
